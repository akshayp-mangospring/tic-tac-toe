const O=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}};O();const w=Object.freeze({marker:"o",struct:'<div class="marker o-marker"></div>',name:"Pink"}),f=Object.freeze({marker:"x",struct:'<div class="marker x-marker"></div>',name:"Blue"}),v=Object.freeze({ONLINE_PLAYER:"online_player",OFFLINE_COMPUTER:"offline_computer",OFFLINE_PLAYERS:"offline_players"}),d=e=>new DOMParser().parseFromString(e,"text/html").body.firstElementChild,p=()=>window.location.reload(),h=e=>{setTimeout(()=>{p()},e)},P=(e,n)=>{const t=[];for(let r=0;r<e.length;r+=1)e[r]===n&&t.push(r);return t},I=(e,n)=>{const t=Math.ceil(e),r=Math.floor(n);return Math.floor(Math.random()*(r-t+1))+t},N=()=>Object.freeze([[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]),F=e=>{switch(e){case 1:return"won-horizontal";case 2:return"won-clock-diagonal";case 3:return"won-vertical";case 4:return"won-anticlock-diagonal";default:return""}},y=(e,{marker:n})=>{const t=N();let r={hasWon:!1,winCombo:null};for(let o=0;o<t.length;o+=1){const a=t[o];if(a.every(i=>e[i]===n)){r={hasWon:!0,winCombo:a};break}}return r},z=e=>{const n=document.getElementsByClassName("cell"),t=e[1]-e[0],r=F(t);e.forEach(o=>{n[o].classList.add(r)})},x=()=>{const t=Array(9).fill(null);let r=0;return Object.freeze({getCells:()=>t,setCell:(o,a)=>{t[o]=a,r+=1},shouldComputeWinner:()=>r>=3*2-1,isBoardFilled:()=>r===9})},S=()=>{const e=x(),n=document.getElementById("game-board"),t=document.getElementById("success-pop"),r=f,o=w,a=(s,l,c)=>{s.appendChild(d(c)),e.setCell(Array.prototype.indexOf.call(s.parentNode.children,s),l),s.classList.add("filled-in")},i=()=>e.isBoardFilled()?(t.classList.add("game-tied"),t.appendChild(d(`<h1 class="game-status-text">It's a tie! Play again!!</h1>`)),h(2e3),!0):!1,u=s=>{if(e.shouldComputeWinner()){const{name:l}=s,{hasWon:c,winCombo:g}=y(e.getCells(),s);if(c)return z(g),t.style.display="flex",t.appendChild(d(`<h1 class="game-status-text">${l} has Won the Game!</h1>`)),h(5e3),!0}return!1};t.addEventListener("click",()=>{p()}),n.addEventListener("click",s=>{const l=s.target,{marker:c,struct:g}=r,{marker:L,struct:E}=o;if(l.classList.contains("filled-in")||!l.classList.contains("cell")||(a(l,c,g),u(r))||i())return;const b=P(e.getCells(),null),C=b[I(0,b.length-1)];a(l.parentNode.children[C],L,E),u(o)})},M=()=>{const e=x(),n=document.getElementById("game-board"),t=document.getElementById("success-pop");let r=f;t.addEventListener("click",()=>{p()}),n.addEventListener("click",o=>{const a=o.target,{name:i,marker:u,struct:s}=r;if(!(a.classList.contains("filled-in")||!a.classList.contains("cell"))){if(a.appendChild(d(s)),e.setCell(Array.prototype.indexOf.call(a.parentNode.children,a),u),a.classList.add("filled-in"),e.shouldComputeWinner()){const{hasWon:l,winCombo:c}=y(e.getCells(),r);if(l){z(c),t.style.display="flex",t.appendChild(d(`<h1 class="game-status-text">${i} has Won the Game!</h1>`)),h(5e3);return}}r===f?r=w:r=f,e.isBoardFilled()&&(t.classList.add("game-tied"),t.appendChild(d(`<h1 class="game-status-text">It's a tie! Play again!!</h1>`)),h(2e3))}})},{ONLINE_PLAYER:W,OFFLINE_COMPUTER:A,OFFLINE_PLAYERS:k}=v,m=(e=k)=>{switch(e){case W:break;case A:S();break;case k:M();break;default:console.info("NEED A MODE TO PLAY.");break}};document.addEventListener("DOMContentLoaded",()=>{const{ONLINE_PLAYER:e,OFFLINE_COMPUTER:n,OFFLINE_PLAYERS:t}=v;switch(window.location.search){case`${e}=true`:m(e);break;case`${n}=true`:m(n);break;case`${t}=true`:m(t);break;default:m(n);break}});
