const F=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function a(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=a(o);fetch(o.href,n)}};F();const b=Object.freeze({marker:"o",struct:'<div class="marker o-marker"></div>',name:"Pink"}),g=Object.freeze({marker:"x",struct:'<div class="marker x-marker"></div>',name:"Blue"}),L=Object.freeze({ONLINE_PLAYER:"online_player",OFFLINE_COMPUTER:"offline_computer",OFFLINE_PLAYERS:"offline_players"}),O=Object.freeze({EASY:"easy",HARD:"hard"}),M=Object.freeze({ONLINE:"online",OFFLINE:"offline"}),A="It's a tie! Play again!!",S=`<h1 class="game-status-text">${A}</h1>`,w=e=>new DOMParser().parseFromString(e,"text/html").body.firstElementChild,p=()=>window.location.reload(),C=e=>{setTimeout(()=>{p()},e)},I=(e,t)=>{const a=[];for(let r=0;r<e.length;r+=1)e[r]===t&&a.push(r);return a},B=(e,t)=>Math.floor(Math.random()*(Math.floor(t)-Math.ceil(e)+1))+Math.ceil(e),T=e=>e.parentNode.children,R=e=>e.classList.contains("filled-in"),W=e=>e.classList.contains("cell"),D=e=>{switch(e){case 1:return"won-horizontal";case 2:return"won-clock-diagonal";case 3:return"won-vertical";case 4:return"won-anticlock-diagonal";default:return""}},_=e=>{const t=document.getElementsByClassName("cell"),a=e[1]-e[0],r=D(a);e.forEach(o=>{t[o].classList.add(r)})},k=e=>R(e)||!W(e),Y=()=>{const e=document.getElementById("success-pop");e.classList.add("game-tied"),e.appendChild(w(S)),C(2e3)},m=(e,{struct:t})=>{e.appendChild(w(t)),e.classList.add("filled-in")},j=(e,{name:t})=>{const a=document.getElementById("success-pop");_(e),a.style.display="flex",a.appendChild(w(`<h1 class="game-status-text">${t} has Won the Game!</h1>`)),C(5e3)},v=e=>Array.prototype.indexOf.call(T(e),e),$=()=>Object.freeze([[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]),H=(e,{marker:t})=>{const a=$();let r={hasWon:!1,winCombo:null};for(let o=0;o<a.length;o+=1){const n=a[o];if(n.every(s=>e[s]===t)){r={hasWon:!0,winCombo:n};break}}return r},y=(e=3)=>{const t=e**2,a=Array(t).fill(null),r=e*2-1;let o=0;return Object.freeze({getCells:()=>a,setCell:(n,s)=>{a[n]=s,o+=1},shouldComputeWinner:()=>o>=r,isBoardFilled:()=>o===t})},u=(e,t)=>{if(e.shouldComputeWinner()){const{hasWon:a,winCombo:r}=H(e.getCells(),t);if(a)return j(r,t),!0}return!1},x=e=>e.isBoardFilled()?(Y(),!0):!1,G=()=>{const e=y(),t=document.getElementById("game-board"),a=document.getElementById("success-pop"),r=g,o=b;a.addEventListener("click",()=>{p()}),t.addEventListener("click",n=>{const s=n.target,{marker:c}=r,{marker:i}=o;if(k(s)||(e.setCell(v(s),c),m(s,r),u(e,r))||x(e))return;const f=I(e.getCells(),null),h=B(0,f.length-1),l=f[h];e.setCell(l,i),m(s.parentNode.children[l],o),u(e,o)})},U=()=>{const e=y(),t=document.getElementById("game-board"),a=document.getElementById("success-pop"),r=g,o=b,n=s=>{console.log(s);for(let c=0;c<s.length;c+=1){const i=s[c];console.log(i)}return s[0]};a.addEventListener("click",()=>{p()}),t.addEventListener("click",s=>{const c=s.target,{marker:i}=r,{marker:f}=o;if(k(c)||(e.setCell(v(c),i),m(c,r),u(e,r))||x(e))return;const h=I(e.getCells(),null),l=h[n(h)];e.setCell(l,f),m(c.parentNode.children[l],o),u(e,o)})},q=()=>{const e=y(),t=document.getElementById("game-board"),a=document.getElementById("success-pop");let r=g;a.addEventListener("click",()=>{p()}),t.addEventListener("click",o=>{const n=o.target,{marker:s}=r;k(n)||(e.setCell(v(n),s),m(n,r),!u(e,r)&&(r=r===g?b:g,x(e)))})},{ONLINE_PLAYER:K,OFFLINE_COMPUTER:J,OFFLINE_PLAYERS:E}=L,{EASY:z,HARD:Q}=O,d=({mode:e=E,level:t=z})=>{switch(e){case K:break;case J:t===z?G():t===Q&&U();break;case E:q();break;default:console.info("NEED A MODE TO PLAY.");break}};document.addEventListener("DOMContentLoaded",()=>{const{ONLINE_PLAYER:e,OFFLINE_COMPUTER:t,OFFLINE_PLAYERS:a}=L,{EASY:r,HARD:o}=O;switch(window.location.search){case`${e}=true`:d({mode:e});break;case`${t}=true`:d({mode:t,level:r});break;case`${t}=true&level=${o}`:d({mode:t,level:o});break;case`${a}=true`:d({mode:a});break;default:d({mode:t,level:r});break}});const{ONLINE:N,OFFLINE:V}=M;function P({type:e},t){const a=document.getElementById("internet-connection-status"),r="show";a.querySelector(".toast-body").innerText=t,a.classList.add(r),e===N&&setTimeout(()=>{a.classList.remove(r)},2e3)}window.addEventListener(V,e=>{P(e,"Lost connection")});window.addEventListener(N,e=>{P(e,"Back online")});
